# ğŸ§© TÃNH NÄ‚NG Má»šI: Company Rating â€“ Biá»ƒu diá»…n thang Ä‘o Ä‘Ã¡nh giÃ¡ doanh nghiá»‡p

**Má»¥c tiÃªu:**  
XÃ¢y dá»±ng má»™t tab má»›i hiá»ƒn thá»‹ biá»ƒu Ä‘á»“ thang Ä‘iá»ƒm (T1â†’T8) Ä‘á»ƒ Ä‘Ã¡nh giÃ¡ má»©c Ä‘á»™ rá»§i ro cá»§a doanh nghiá»‡p theo tá»«ng mÃ£ ngÃ nh vÃ  chá»‰ sá»‘. CÃ³ kháº£ nÄƒng tÆ°Æ¡ng tÃ¡c, lá»c dá»¯ liá»‡u theo doanh nghiá»‡p, vÃ  xuáº¥t CSV.

---

## ğŸ“Œ YÃªu cáº§u chá»©c nÄƒng



2. **Tab má»›i Ä‘á»™c láº­p**
   - TÃ­nh nÄƒng náº±m trong má»™t tab má»›i riÃªng biá»‡t, khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n cÃ¡c má»¥c â€œVisualizeâ€ cÅ©.

3. **Biá»ƒu Ä‘á»“ thang Ä‘o (tiers)**
   - Hiá»ƒn thá»‹ 8 khoáº£ng Ä‘iá»ƒm (T1 â†’ T8), vá»›i:
     - `T1` lÃ  tá»‘t nháº¥t â†’ `T8` lÃ  tá»‡ nháº¥t
     - Dá»¯ liá»‡u thang Ä‘iá»ƒm láº¥y tá»« API `tiers/cluster`
   - Bá»™ mÃ u trá»±c quan, dá»… nhÃ¬n, chuyá»ƒn tá»« mÃ¡t â†’ nÃ³ng khi Ä‘iá»ƒm giáº£m.
   - CÃ³ tiÃªu Ä‘á», legend, trá»¥c, nhÃ£n, chÃº thÃ­ch rÃµ rÃ ng.

4. **TÆ°Æ¡ng tÃ¡c trÃªn biá»ƒu Ä‘á»“**
   - Khi báº¥m vÃ o 1 khoáº£ng T_i:
     - Hiá»ƒn thá»‹ tÃªn vÃ  mÃ£ ngÃ nh (sector)
     - Sá»‘ lÆ°á»£ng doanh nghiá»‡p thuá»™c khoáº£ng Ä‘Ã³

5. **Hiá»ƒn thá»‹ dá»¯ liá»‡u chi tiáº¿t**
   - BÃªn dÆ°á»›i biá»ƒu Ä‘á»“ lÃ  danh sÃ¡ch cÃ¡c ngÃ nh, Ä‘iá»ƒm vÃ  sá»‘ doanh nghiá»‡p thuá»™c tá»«ng thang
   - Dá»¯ liá»‡u máº«u tá»« API:

\`\`\`json
Input:
{
  "sector": "A",
  "group_label": 1,
  "indicator": "STD_RTD146"
}
\`\`\`

\`\`\`json
Output:
{
  "group_label": 1,
  "indicator": "STD_RTD146",
  "method": { "label": "kmeans", "mode": "high_good" },
  "sector": "A",
  "tiers": [
    { "tier": "T1", "range": [84.8,"inf"], "count": 1 },
    { "tier": "T2", "range": [0.88,84.8], "count": 2 },
    ...
  ]
}
\`\`\`

---

## ğŸ§­ Sidebar Ä‘iá»u khiá»ƒn

- Láº¥y danh sÃ¡ch cÃ¡c chá»‰ sá»‘ tá»« endpoint: `GET /indicator`.
- CÃ³ 2 cháº¿ Ä‘á»™ hiá»ƒn thá»‹:
  1. **KhÃ´ng chá»n doanh nghiá»‡p** â†’ hiá»‡n biá»ƒu Ä‘á»“ thang Ä‘iá»ƒm nhÆ° mÃ´ táº£ trÃªn
  2. **Chá»n 1 danh sÃ¡ch doanh nghiá»‡p** â†’ hiá»ƒn thá»‹ báº£ng: mÃ£ ngÃ nh, Ä‘iá»ƒm cá»§a tá»«ng ngÃ nh, thang Ä‘iá»ƒm cá»§a cÃ¡c doanh nghiá»‡p Ä‘Ã£ chá»n
- Sidebar cá»§a tab nÃ y **tÃ¡ch biá»‡t hoÃ n toÃ n** vá»›i sidebar cá»§a cÃ¡c tÃ­nh nÄƒng visualize cÅ©.

---

## ğŸ“¤ Xuáº¥t dá»¯ liá»‡u

- Cho phÃ©p xuáº¥t dá»¯ liá»‡u hiá»‡n táº¡i thÃ nh file `.csv`.

---

## ğŸ“Œ Ghi chÃº logic

- `indicator` lÃ  chá»‰ sá»‘ Ä‘á»ƒ chia thang Ä‘iá»ƒm
- `group_label` lÃ  nhÃ³m phÃ¢n cá»¥m trong tá»«ng ngÃ nh
- `method.label = kmeans` â†’ phÆ°Æ¡ng phÃ¡p phÃ¢n cá»¥m
- `method.mode = high_good | low_good` â†’ Ä‘iá»ƒm cao tá»‘t / Ä‘iá»ƒm tháº¥p tá»‘t
- `tier = T1..T8`, `range = [min, max]`, `count` = sá»‘ doanh nghiá»‡p
